<div class="modal fade" id="addItemModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="itemModalTitle">Add New Item</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="itemForm" method="post" class="needs-validation" novalidate>
                    {% csrf_token %}
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <label class="form-label required">Name</label>
                            <input type="text" class="form-control" name="name" required>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-12">
                            <label class="form-label required">Category</label>
                            <select name="category" class="form-select select2-basic" required>
                                <option value="">Select Category</option>
                                {% for category in categories %}
                                    <option value="{{ category.id }}">{{ category.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <!-- Rest of your form fields -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label required">Quantity</label>
                            <input type="number" class="form-control" name="quantity" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label required">Unit</label>
                            <input type="text" class="form-control" name="unit" required>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label required">Minimum Stock Level</label>
                            <input type="number" class="form-control" name="minimum_stock" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Unit Price</label>
                            <input type="number" step="0.01" class="form-control" name="unit_price">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-12">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" name="description" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">Save Item</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    /* Modal styles from staff management */
    #addItemModal .modal-content {
        border: none;
        border-radius: 1rem;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }

    #addItemModal .form-label.required:after {
        content: "*";
        color: #dc3545;
        margin-left: 4px;
    }

    #addItemModal .form-control,
    #addItemModal .form-select {
        height: 42px;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        border: 1px solid #ced4da;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    #addItemModal .select2-container--bootstrap5 .select2-selection {
        height: 42px;
        border-radius: 0.5rem;
    }
</style>

<script>
    $(document).ready(function() {
        // Initialize Select2
        $('.select2-basic').select2({
            theme: 'bootstrap5',
            width: '100%',
            dropdownParent: $('#addItemModal')
        });

        // Reinitialize Select2 when modal opens
        $('#addItemModal').on('shown.bs.modal', function () {
            $('.select2-basic').select2({
                theme: 'bootstrap5',
                width: '100%',
                dropdownParent: $('#addItemModal')
            });
        });
    });
</script>